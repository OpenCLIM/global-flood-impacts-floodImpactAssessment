kind: M
api_version: v1beta3
metadata:
  display_name: Global Urban_Flooding:Simple Flood Impact Assessment
  contact_point_name: Steve Birkinshaw
  contact_point_email: stephen.birkinshaw@newcastle.ac.uk
  publisher: Newcastle University
  name: flood-impact-assessment
  summary: Assess flood impacts on buildings
  description:
    Calculates depths of flooded buildings and number that have high low, medium or high exposure
    Each building is buffered by the grid resolution of the DEM to extract surrounding depths.
    Flooded areas are created as polygons where flood depths exceed the Threshhold (Low is <0.1, Medium > 0.1 and <0.3, High > 0.3)
    The intersection of the buffered building polygon boundaries and the flooded areas is then calculated.

  source_code: https://github.com/OpenCLIM/impact-assessment
spec:
  inputs:
    parameters:
      - name: LOCATION
        title: Location
        type: string
        description: The city/location of interest.
        required: false

      - name: PROJECTION
        title: Projection  
        type: number
        description: 
          Input the numerical code for the required projection (e.g. 27700). 
          Use a projection that uses meters not decimal degrees. 
          If left blank the model will apply the appropriate Universal Transverse Mercator (UTM) Coordinate System.
        required: False 

        
    dataslots:
      - name: Parameters
        description:
          A list of parameters in csv file generated by the user input model.
        path: inputs/parameters
        required: false 
        
      - name: Buildings
        description:
          Buildings can be provided as polygons in GeoPackage or Shapefile format.
          Cells which fall within buildings are removed from the domain.
          Water is prevented from flowing into these removed areas using closed cell boundary conditions.
        path: inputs/buildings
        required: false

      - name: Maximum depth Raster
        description:
          Maximum depth raster in GeoTIFF format.
          The file must be named "max_depth.tif".
        path: inputs/run
        required: false

      - name: Maximum depth CSV
        description:
          Maximum depth for each cell in the Domain in CSV file.
        path: inputs/run
        required: false

        
  outputs:
    datasets:
      - name: outputs/impacts/exposure_plot.png
        type: png
        description:
         A plot showing the buidlings affected by flood water

      - name: outputs/impacts/LocationName_Exposure.csv
        type: csv
        description:
         exposure depth for each building

      - name: outputs/impacts/LocationName_Exposure.gpkg
        type: gpkg
        description:
         exposure depth for each building as polygons

      - name: outputs/impacts/LocationName_Exposure_summary.txt
        type: txt
        description:
         summary of number of buildings damaged
